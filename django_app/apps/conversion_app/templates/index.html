{% load i18n %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% trans "Number Converter" %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: sans-serif;
        }
        .intro-section {
            padding: 2rem 0;
            background-color: #f8f9fa; /* Light grey background */
            margin-bottom: 2rem;
            border-radius: .25rem;
        }
        .nav-tabs .nav-link.active {
            background-color: #0d6efd; /* Bootstrap primary blue */
            color: white;
            border-bottom-color: #0d6efd;
        }
        .nav-tabs .nav-link {
            color: #0d6efd; /* Bootstrap primary blue for inactive tabs */
        }
        .tab-content {
            border: 1px solid #dee2e6;
            border-top: none;
            padding: 2rem;
            border-radius: 0 0 .25rem .25rem; /* Rounded bottom corners */
            background-color: #fff; /* White background for tab content */
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="intro-section text-center p-5 mb-4 bg-light rounded-3">
            <h1 class="display-4">{% trans "Welcome to Our Utility App!" %}</h1>
            <p class="lead">{% trans "Your one-stop solution for various conversions and calculations. Explore the tabs below to access different tools." %}</p>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="converter-tab" data-bs-toggle="tab" data-bs-target="#converter" type="button" role="tab" aria-controls="converter" aria-selected="true">{% trans "Number Converter" %}</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="unit-converter-tab" data-bs-toggle="tab" data-bs-target="#unit-converter" type="button" role="tab" aria-controls="unit-converter" aria-selected="false">{% trans "Unit Converter (Coming Soon)" %}</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="calculator-tab" data-bs-toggle="tab" data-bs-target="#calculator" type="button" role="tab" aria-controls="calculator" aria-selected="false">{% trans "Calculator (Coming Soon)" %}</button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="converter" role="tabpanel" aria-labelledby="converter-tab">
                <h2 class="mb-4 text-center">{% trans "Number Base Converter" %}</h2>
                <form method="post" class="card p-4 shadow-sm">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="number_input" class="form-label">{% trans "Enter number:" %}</label>
                        <input type="text" class="form-control" id="number_input" name="number_input" value="{{ number_input|default:'' }}">
                    </div>

                    <div class="row mb-3 align-items-center">
                        <div class="col-md-5">
                            <label for="input_base" class="form-label">{% trans "From base:" %}</label>
                            <select class="form-select" id="input_base" name="input_base">
                                <option value="decimal" {% if input_base_selected == 'decimal' %}selected{% endif %}>{% trans "Decimal" %}</option>
                                <option value="binary" {% if input_base_selected == 'binary' %}selected{% endif %}>{% trans "Binary" %}</option>
                                <option value="octal" {% if input_base_selected == 'octal' %}selected{% endif %}>{% trans "Octal" %}</option>
                                <option value="hexadecimal" {% if input_base_selected == 'hexadecimal' %}selected{% endif %}>{% trans "Hexadecimal" %}</option>
                            </select>
                        </div>
                        <div class="col-md-2 text-center mt-4 mt-md-0"> <!-- Adjusted margin for smaller screens -->
                            {% trans "Swap bases" as swap_bases_title %}
                            <button type="button" class="btn btn-secondary btn-sm" id="swap_bases_button" title="{{ swap_bases_title }}">
                                &#x21C4; <!-- Unicode for arrows pointing up and down -->
                            </button>
                        </div>
                        <div class="col-md-5">
                            <label for="output_base" class="form-label">{% trans "To base:" %}</label>
                            <select class="form-select" id="output_base" name="output_base">
                                <option value="decimal" {% if output_base_selected == 'decimal' %}selected{% endif %}>{% trans "Decimal" %}</option>
                                <option value="binary" {% if output_base_selected == 'binary' %}selected{% endif %}>{% trans "Binary" %}</option>
                                <option value="octal" {% if output_base_selected == 'octal' %}selected{% endif %}>{% trans "Octal" %}</option>
                                <option value="hexadecimal" {% if output_base_selected == 'hexadecimal' %}selected{% endif %}>{% trans "Hexadecimal" %}</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">{% trans "Convert" %}</button>
                </form>

                {% if result %}
                    <div class="alert alert-success mt-4" role="alert">
                        <h4 class="alert-heading">{% trans "Result:" %}</h4>
                        <p class="mb-0">{{ result }}</p>
                    </div>
                {% endif %}

                {% if error %}
                    <div class="alert alert-danger mt-4" role="alert">
                        <h4 class="alert-heading">{% trans "Error:" %}</h4>
                        <p class="mb-0">{{ error }}</p>
                    </div>
                {% endif %}
            </div>

            <div class="tab-pane fade" id="unit-converter" role="tabpanel" aria-labelledby="unit-converter-tab">
                <h3 class="text-center">{% trans "Unit Converter" %}</h3>
                <p class="text-center"><em>{% trans "This feature is coming soon!" %}</em></p>
            </div>

            <div class="tab-pane fade" id="calculator" role="tabpanel" aria-labelledby="calculator-tab">
                <h3 class="text-center">{% trans "Calculator" %}</h3>
                <p class="text-center"><em>{% trans "This feature is coming soon!" %}</em></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('swap_bases_button').addEventListener('click', function() {
            var inputBaseSelect = document.getElementById('input_base');
            var outputBaseSelect = document.getElementById('output_base');

            var tempValue = inputBaseSelect.value;
            inputBaseSelect.value = outputBaseSelect.value;
            outputBaseSelect.value = tempValue;
        });

        // Ensure the correct tab is shown if there's a POST request (e.g., after form submission)
        // Or if there is an error or a result to display.
        const requestMethod = "{{ request.method|escapejs }}";
        const resultExists = "{{ result|escapejs|default:'' }}" !== "";
        const errorExists = "{{ error|escapejs|default:'' }}" !== "";

        if (requestMethod === 'POST' || resultExists || errorExists) {
            var converterTabElement = document.getElementById('converter-tab');
            if (converterTabElement) {
                 var converterTab = new bootstrap.Tab(converterTabElement);
                 converterTab.show();
            }
        }
    </script>
</body>
</html> 